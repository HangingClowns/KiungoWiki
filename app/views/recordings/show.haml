= title(@recording.title)

.row
  = render :partial=>'links'
  .span12
    .section.summary
      %p
        = Recording.human_attribute_name("work_wiki_link")
        \: #{work_wiki_link_path(@recording.work_wiki_link)}
      %p
        - unless["",nil].include?(@recording.recording_date)
          = Recording.human_attribute_name("recording_date") 
          \: #{@recording.recording_date}
      %p
        - unless["",nil].include?(@recording.recording_location)
          = Recording.human_attribute_name("recording_location") 
          \: #{@recording.recording_location}
      %p
        - unless["",nil].include?(@recording.category_wiki_links.first)
          = Recording.human_attribute_name("category")
          \: 
          #{@recording.category_wiki_links.collect{|v| v.category_name}.join(', ').html_safe}
      %p
        - unless["0","",nil].include?(@recording.duration.to_s)
          = Recording.human_attribute_name("duration") 
          \: #{@recording.duration}
      %p
        - unless["0","",nil].include?(@recording.rythm)
          = Recording.human_attribute_name("rythm") 
          \:  #{@recording.rythm}bpm

    %h2 Cr√©dits
    - if @recording.artist_wiki_links == 0
      %p This recording is not associated with any artist.
    - else
      %table.table.table-striped
        %thead
          %tr
            %th= Artist.model_name.human.pluralize
        %tbody
          - @recording.artist_wiki_links.each do |awl|
            %tr
              %td= artist_wiki_link_path(awl)

    %h2= Album.model_name.human.pluralize
    - if @recording.album_wiki_links.length == 0
      %p This recording is not on any album.
    - else
      %table.table.table-striped
        %thead
          %tr
            %th= Album.human_attribute_name("title")
            %th= Album.human_attribute_name("date_released")
            %th= Album.human_attribute_name("label")
            %th= Album.human_attribute_name("media_type")
            %th= Recording.human_attribute_name("itemId")
            %th= Recording.human_attribute_name("itemSection")
            %th= Recording.human_attribute_name("trackNb") 
            %th= Album.human_attribute_name("reference_code")
        %tbody
          - @recording.album_wiki_links.sort{|a,b| a.date_released <=> b.date_released}.each do |awl|
            %tr
              %td= album_wiki_link_path(awl)
              %td= awl.date_released
              %td= awl.label
              %td= awl.media_type
              - unless ["0","",nil].include?(awl.itemId) 
                %td= awl.itemId 
              - else
                %td= "1"
              %td= awl.itemSection
              %td= awl.trackNb
              %td= awl.reference_code
    %h2= Recording.human_attribute_name("info")
    %p=  RedCloth.new(@recording.info).to_html.html_safe 
